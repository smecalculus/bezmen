version: '3'

vars:
  DB_VENDOR: postgres
  REGISTRY: localhost

includes:
  shared:
    taskfile: shared/Taskfile.yml
    dir: shared
  env:
    taskfile: env/Taskfile.yml
    dir: env
  app:
    taskfile: app/Taskfile.yml
    dir: app
  stand:
    taskfile: stand/Taskfile.yml
    dir: stand
  test:
    taskfile: test/Taskfile.yml
    dir: test

tasks:
  source:
    run: once
    cmds:
      - git add .
  clean:
    cmds:
      - docker image prune -f
      - docker volume rm $(docker volume ls -q -f dangling=true)
      - docker network prune -f
